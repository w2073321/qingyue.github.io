!function(){var t=function(){this.config=null,this.sent=!1,this.timing=null,this.filterUa="googlebot|bingbot|yahoo|baidu|bots?",this.abort=!1,this.version="1515396619"};t.prototype={init:function(){if(this.config=window.RUM_CONFIG||{},this.config.env=this.config.env||"product",this.config.rate=this.config.rate||this.getQuerystring("RUM_RATE",this.isLocal()?100:10),this.config.resourceRate=this.config.resourceRate||this.getQuerystring("RUM_RESOURCE_RATE",this.isLocal()?100:1),this.config.errorRate=this.config.errorRate||this.getQuerystring("RUM_ERROR_RATE",this.isLocal()?100:1),!this.validate())return this;this.timing=window.performance.timing;try{var t=this;"complete"===document.readyState?t.onload():document.addEventListener?window.addEventListener("load",function(){t.onload()},!1):document.attachEvent&&window.attachEvent("onload",function(){t.onload()})}catch(t){}return this},onload:function(){var t=this;setTimeout(function(){t.send()},50)},validate:function(){return!(!this.config.site||!1===this.config.enable||Math.floor(100*Math.random())>this.config.rate||new RegExp(this.filterUa).test(navigator.userAgent.toLowerCase())||!window.performance||!window.performance.timing||"function"!=typeof window.performance.getEntriesByType||!window.performance.getEntriesByType("resource")instanceof Array||new RegExp(this.filterUa).test(navigator.userAgent.toLowerCase()))},send:function(){if(!this.sent){this.sent=!0;var t=this.getUrlInfo(document.referrer||""),e=this.merge({meta:this.getPageInfo()},{page:this.merge({url:location.href,referer:document.referrer||"",referer_domain:t.domain,referer_name:t.name,err:this.filterErrors(),page_params:this.config.page_params?JSON.stringify(this.config.page_params):""},this.getNavigationTiming(),this.getScreenInfo(),this.getAgentInfo())});if(e.resource=this.getResourceTiming(e.page.nt_plt),e.page.res_cnt=e.resource.length?e.resource.length-1:0,!this.abort){var n=LZString.compressToBase64(JSON.stringify(e));if(navigator.sendBeacon)navigator.sendBeacon(this.getCollectUrl(),n);else{var i=new XMLHttpRequest;i.open("POST",this.getCollectUrl(),!0),i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.setRequestHeader("Accept","application/json, text/javascript, */*; q=0.01"),i.send(n)}(this.isLocal()||this.config.debug||this.getQuerystring("RUM_DEBUG"))&&console.log(JSON.stringify(e).length+" -> "+n.length,e)}}},getPageInfo:function(){return this.pageInfo||(this.pageInfo={site:this.config.site,pageid:this.generateId(),lang:this.config.lang||"en",m:this.config.m||"other",v:this.config.v||"other",c:this.config.c||"other",rum_version:this.version}),this.pageInfo},getScreenInfo:function(){var t=document.documentElement.clientWidth,e=document.documentElement.clientHeight,n=parseInt("function"==typeof window.scrollY?window.scrollY():window.scrollY);return{scr_xy:window.screen.width+"x"+window.screen.height,scr_sy:isNaN(n)?0:n,scr_vp:void 0===t?"":t+"x"+e}},getAgentInfo:function(){return{ua_raw:window.navigator.userAgent}},getNavigationTiming:function(){var t=this.timing.navigationStart,e=this.getUrlInfo(location.href),n=window.performance.getEntriesByType("navigation");return n=1===n.length?n[0]:{},{name:e.name,domain:e.domain,nt_st:t,nt_red_cnt:performance.navigation.redirectCount,nt_nav_type:performance.navigation.type,nt_plt:this.duration(t,this.timing.loadEventStart),nt_pdt:this.duration(this.timing.responseStart,this.timing.responseEnd),nt_dns:this.duration(this.timing.domainLookupStart-this.timing.domainLookupEnd),nt_tcp:this.duration(this.timing.connectStart,this.timing.connectEnd),nt_srt:this.duration(this.timing.requestStart,this.timing.responseStart),nt_rrt:this.duration(t,this.timing.fetchStart),nt_dit:this.duration(t,this.timing.domInteractive),nt_clt:this.duration(t,this.timing.domContentLoadedEventStart),nt_fpt:this.getFirstPaintTime(),nt_spdy:this.getChromeLoadTimes()&&this.getChromeLoadTimes().wasFetchedViaSpdy?1:0,nt_cinf:this.getChromeLoadTimes()?this.getChromeLoadTimes().connectionInfo:"",s_eb:n.encodedBodySize||0,s_db:n.decodedBodySize||0,s_ts:n.transferSize||0}},merge:function(){var t,e,n=arguments.length,i={};for(t=0;t<n;t++){e=arguments[t];for(var o in e)i[o]=e[o]}return i},generateId:function(){var t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",e=t.length;for(result="",i=0;i<40;i++)result+=t.charAt(Math.floor(Math.random()*e));return result},getResourceTiming:function(t){if(Math.floor(100*Math.random())>this.config.resourceRate&&t<1e4)return[];for(var e,n,i,o,r=window.performance.getEntriesByType("resource"),s=r.length,a=this.getNavigationTiming(),c=this.getUrlInfo(location.href),h=[{url:location.href,initiatorType:"navigation",type:"html",name:c.name,domain:c.domain,duration:this.duration(this.timing.navigationStart,this.timing.responseEnd),download:a.nt_pdt,dns:a.nt_dns,tcp:a.nt_tcp,wait:a.nt_srt,ssl:this.timing.secureConnectionStart>0?this.duration(this.timing.secureConnectionStart,this.timing.connectEnd):0,s_eb:a.s_eb||0,s_db:a.s_db||0,s_ts:a.s_ts||0,index:0}],u=0;u<s;u++)e=r[u],c=this.getUrlInfo(e.name),n=e.requestStart>0,h.push({url:e.name,type:(i=e.name,o=e.initiatorType,"link"===o&&-1!==i.indexOf(".css")?"css":"script"===o?"js":"css"===o&&/\.(img|jpg|jpeg|png|gif)$/.test(i.split("?")[0])?"img":"css"===o&&/\.(eot|ttf|svg|otf|woff|woff2)$/.test(i.split("?")[0])?"font":o||"other"),initiatorType:e.initiatorType,name:c.name,domain:c.domain,duration:this.duration(0,e.duration),download:n?this.duration(e.responseStart,e.responseEnd):0,dns:n?this.duration(e.domainLookupStart,e.domainLookupEnd):0,tcp:n?this.duration(e.connectStart,e.connectEnd):0,wait:n?this.duration(e.requestStart,e.responseStart):0,ssl:n&&e.secureConnectionStart>0?this.duration(r.secureConnectionStart,r.connectEnd):0,s_eb:e.encodedBodySize||0,s_db:e.decodedBodySize||0,s_ts:e.transferSize||0,index:u+1});return h},getFirstPaintTime:function(){var t=0;return this.timing.msFirstPaint?t=this.duration(this.timing.fetchStart,this.timing.msFirstPaint):this.getChromeLoadTimes()&&(t=this.duration(this.timing.fetchStart,1e3*this.getChromeLoadTimes().firstPaintTime)),t>0?t:0},getChromeLoadTimes:function(){return!this.chromeLoadTimes&&window.chrome&&"function"==typeof window.chrome.loadTimes&&(this.chromeLoadTimes=window.chrome.loadTimes()),this.chromeLoadTimes},filterErrors:function(){if(!this.config.errors||Math.floor(100*Math.random())>this.config.errorRate)return"";for(var t=[],e=0,n=this.config.errors.length;e<n;e++){var i;0!=(i=this.config.errors[e]).line&&0!=i.column&&""!=i.file&&t.push(i)}return t.length?JSON.stringify(t):""},duration:function(t,e){if(this.abort)return 0;"number"!=typeof t&&(t=0),"number"!=typeof e&&(e=0);var n=Math.round(e)-Math.round(t);return(n<0||n>36e5)&&(this.abort=!0),n},isLocal:function(){return 0===this.config.env.indexOf("dev")||0===this.config.env.indexOf("test")},getCollectUrl:function(){return this.config.collectUrl?this.config.collectUrl:this.isLocal()?0===this.config.env.indexOf("dev")?"http://www.rum.com.develop.dev50.egomsl.com/rum/collect/index":"http://www.rum.com.release.test50.egomsl.com/rum/collect/index":"https://perf.logsss.com"},getUrlInfo:function(t){var e=t.match(new RegExp("^https?://([^/]+)(.*)"));return e?(e[2]=e[2].split("?")[0].replace(/(^\s*)|(\s*$)/g,"").replace(/\/\//g,""),e[2]=e[2].replace(/(^\/*)|(\/*$)/g,""),e[2]=e[2].split("/").pop().split("#")[0],{domain:e[1]||"other",name:e[2]||e[1]||"other"}):{domain:"other",name:"other"}},getQuerystring:function(t,e){var n=location.search.match(new RegExp("[?&]"+t+"=([^&]+)"));return n?n[1]:e}},(new t).init()}();var LZString=function(){var t=String.fromCharCode,e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",i={};function o(t,e){if(!i[t]){i[t]={};for(var n=0;n<t.length;n++)i[t][t.charAt(n)]=n}return i[t][e]}var r={compressToBase64:function(t){if(null==t)return"";var n=r._compress(t,6,function(t){return e.charAt(t)});switch(n.length%4){default:case 0:return n;case 1:return n+"===";case 2:return n+"==";case 3:return n+"="}},decompressFromBase64:function(t){return null==t?"":""==t?null:r._decompress(t.length,32,function(n){return o(e,t.charAt(n))})},compressToUTF16:function(e){return null==e?"":r._compress(e,15,function(e){return t(e+32)})+" "},decompressFromUTF16:function(t){return null==t?"":""==t?null:r._decompress(t.length,16384,function(e){return t.charCodeAt(e)-32})},compressToUint8Array:function(t){for(var e=r.compress(t),n=new Uint8Array(2*e.length),i=0,o=e.length;i<o;i++){var s=e.charCodeAt(i);n[2*i]=s>>>8,n[2*i+1]=s%256}return n},decompressFromUint8Array:function(e){if(null===e||void 0===e)return r.decompress(e);for(var n=new Array(e.length/2),i=0,o=n.length;i<o;i++)n[i]=256*e[2*i]+e[2*i+1];var s=[];return n.forEach(function(e){s.push(t(e))}),r.decompress(s.join(""))},compressToEncodedURIComponent:function(t){return null==t?"":r._compress(t,6,function(t){return n.charAt(t)})},decompressFromEncodedURIComponent:function(t){return null==t?"":""==t?null:(t=t.replace(/ /g,"+"),r._decompress(t.length,32,function(e){return o(n,t.charAt(e))}))},compress:function(e){return r._compress(e,16,function(e){return t(e)})},_compress:function(t,e,n){if(null==t)return"";var i,o,r,s={},a={},c="",h="",u="",d=2,f=3,g=2,p=[],l=0,m=0;for(r=0;r<t.length;r+=1)if(c=t.charAt(r),Object.prototype.hasOwnProperty.call(s,c)||(s[c]=f++,a[c]=!0),h=u+c,Object.prototype.hasOwnProperty.call(s,h))u=h;else{if(Object.prototype.hasOwnProperty.call(a,u)){if(u.charCodeAt(0)<256){for(i=0;i<g;i++)l<<=1,m==e-1?(m=0,p.push(n(l)),l=0):m++;for(o=u.charCodeAt(0),i=0;i<8;i++)l=l<<1|1&o,m==e-1?(m=0,p.push(n(l)),l=0):m++,o>>=1}else{for(o=1,i=0;i<g;i++)l=l<<1|o,m==e-1?(m=0,p.push(n(l)),l=0):m++,o=0;for(o=u.charCodeAt(0),i=0;i<16;i++)l=l<<1|1&o,m==e-1?(m=0,p.push(n(l)),l=0):m++,o>>=1}0==--d&&(d=Math.pow(2,g),g++),delete a[u]}else for(o=s[u],i=0;i<g;i++)l=l<<1|1&o,m==e-1?(m=0,p.push(n(l)),l=0):m++,o>>=1;0==--d&&(d=Math.pow(2,g),g++),s[h]=f++,u=String(c)}if(""!==u){if(Object.prototype.hasOwnProperty.call(a,u)){if(u.charCodeAt(0)<256){for(i=0;i<g;i++)l<<=1,m==e-1?(m=0,p.push(n(l)),l=0):m++;for(o=u.charCodeAt(0),i=0;i<8;i++)l=l<<1|1&o,m==e-1?(m=0,p.push(n(l)),l=0):m++,o>>=1}else{for(o=1,i=0;i<g;i++)l=l<<1|o,m==e-1?(m=0,p.push(n(l)),l=0):m++,o=0;for(o=u.charCodeAt(0),i=0;i<16;i++)l=l<<1|1&o,m==e-1?(m=0,p.push(n(l)),l=0):m++,o>>=1}0==--d&&(d=Math.pow(2,g),g++),delete a[u]}else for(o=s[u],i=0;i<g;i++)l=l<<1|1&o,m==e-1?(m=0,p.push(n(l)),l=0):m++,o>>=1;0==--d&&(d=Math.pow(2,g),g++)}for(o=2,i=0;i<g;i++)l=l<<1|1&o,m==e-1?(m=0,p.push(n(l)),l=0):m++,o>>=1;for(;;){if(l<<=1,m==e-1){p.push(n(l));break}m++}return p.join("")},decompress:function(t){return null==t?"":""==t?null:r._decompress(t.length,32768,function(e){return t.charCodeAt(e)})},_decompress:function(e,n,i){var o,r,s,a,c,h,u,d=[],f=4,g=4,p=3,l="",m=[],v={val:i(0),position:n,index:1};for(o=0;o<3;o+=1)d[o]=o;for(s=0,c=Math.pow(2,2),h=1;h!=c;)a=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=i(v.index++)),s|=(a>0?1:0)*h,h<<=1;switch(s){case 0:for(s=0,c=Math.pow(2,8),h=1;h!=c;)a=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=i(v.index++)),s|=(a>0?1:0)*h,h<<=1;u=t(s);break;case 1:for(s=0,c=Math.pow(2,16),h=1;h!=c;)a=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=i(v.index++)),s|=(a>0?1:0)*h,h<<=1;u=t(s);break;case 2:return""}for(d[3]=u,r=u,m.push(u);;){if(v.index>e)return"";for(s=0,c=Math.pow(2,p),h=1;h!=c;)a=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=i(v.index++)),s|=(a>0?1:0)*h,h<<=1;switch(u=s){case 0:for(s=0,c=Math.pow(2,8),h=1;h!=c;)a=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=i(v.index++)),s|=(a>0?1:0)*h,h<<=1;d[g++]=t(s),u=g-1,f--;break;case 1:for(s=0,c=Math.pow(2,16),h=1;h!=c;)a=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=i(v.index++)),s|=(a>0?1:0)*h,h<<=1;d[g++]=t(s),u=g-1,f--;break;case 2:return m.join("")}if(0==f&&(f=Math.pow(2,p),p++),d[u])l=d[u];else{if(u!==g)return null;l=r+r.charAt(0)}m.push(l),d[g++]=r+l.charAt(0),r=l,0==--f&&(f=Math.pow(2,p),p++)}}};return r}();