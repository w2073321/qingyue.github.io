function addPermillageMark(e){var a=e.length%3,t="",n=[],o=0,s="";0!=a&&(t=e.substring(0,a),n.push(t)),e=e.substring(a);for(var i=0;i<e.length;i++)o++,s+=e[i],3==o&&s&&(n.push(s),s="",o=0);return n.join(",")}function GiveGift(e,a,t){this.curIndex=1,this.urls=a,this.giveType=t,this.target=e,this.claimTime=null,this.init()}function _GET(e,a){var t=new RegExp("[?&]"+e+"=([^&]+)","g");a=a||location.search;for(var n,o="";null!==(n=t.exec(a));)o=n[1];return o}function topTimeCount(e){var a,t=$("#js-shop-celebration");if(0==e.shop.countDownFlag)t.parent().remove();else if(e.shop.countDownFlag>0){t.parent().show(),1==e.shop.countDownFlag?(t.parent().removeClass("official").addClass("warm"),""==JS_LANG?t.closest("a").attr("href","/3rd-anniversary-party-promotion.html"):t.closest("a").attr("href","/promotion-anniversary-special-571.html")):(t.parent().removeClass("warm").addClass("official"),t.closest("a").attr("href","/3rd-anniversary-party-promotion.html")),a=e.shop.countDownSecond;var n=function(){var e,o,s,i,r,c,l="";i=a%60,s=Math.floor(a/60),o=Math.floor(s/60),e=Math.floor(o/24),r=o%24,c=s%60,i<10&&(i="0"+i),c<10&&(c="0"+c),r<10&&(r="0"+r),a>0?(l+='<span class="time-wrap" style="margin-left:.35rem;">'+e+"</span>",l+='<span class="time-desc">D</span>',l+='<span class="time-wrap">'+r+"</span>",l+='<span class="time-desc">H</span>',l+='<span class="time-wrap">'+c+"</span>",l+='<span class="time-desc">M</span>',l+='<span class="time-wrap">'+i+"</span>",l+='<span class="time-desc" style="margin-right:0;">S</span>'):(l+='<span class="time-wrap" style="margin-left:.35rem;">0</span>',l+='<span class="time-desc">D</span>',l+='<span class="time-wrap">00</span>',l+='<span class="time-desc">H</span>',l+='<span class="time-wrap">00</span>',l+='<span class="time-desc">M</span>',l+='<span class="time-wrap">00</span>',l+='<span class="time-desc" style="margin-right:0;">S</span>'),t.html(l),a--,setTimeout(n,1e3)};n()}}function appUserInfo(e,a,t){$.ajax({url:"/fun/index.php?act=AppLogin",data:{user_id:e,token:a},type:"post",dataType:"json",success:function(e){e.status?($.cookie("is_app_login",1,{expires:30,path:"/",domain:COOKIESDIAMON}),window.location.href=t):window.location.href="https://userm.zaful.com/sign-up.html"},error:function(e){}})}function appUrlRedirect(){return!loginType&&void(window.location.href="webAction://login?callback=appUserInfo()&isAlert=1")}function getcurrencyInfo(){var e,a,t=window.navigator.userAgent.toLowerCase();t.match(/android/i)?(e=t.substring(t.indexOf("zaful_currency")),a=e.substring(e.indexOf("=")+1).toUpperCase(),GLOBAL.currency.change_html(a)):(t.match(/iphone/i)||t.match(/ipad/i))&&(window.location.href="webAction://currency?callback=getIosCurrencyInfo()")}function getIosCurrencyInfo(e){GLOBAL.currency.change_html(e)}var PRICEPAGECOMMON={goodSkus:[],getPageSkus:function(){var e=[];return $(".my_shop_price[data-sku]").each(function(){var a=$(this).attr("data-sku");a&&"undefined"!==a&&(PRICEPAGECOMMON.goodSkus.indexOf(a)===-1?(PRICEPAGECOMMON.goodSkus.push(a),e.push(a)):($('.my_shop_price[data-sku="'+a+'"]').length>1&&e.push(a),$(this).hasClass("js-refresh-all")&&e.push(a)))}),e},render:function(e,a){e.priceList&&($.each(e.priceList,function(e,a){var t=$('.my_shop_price[data-sku="'+e+'"]');t.each(function(){var e=$(this);0!==a.price&&e.attr("data-orgp",a.price).attr("orgp",a.price),a.newUserPrice>0&&e.hasClass("js-new-price")&&e.attr("data-orgp",a.newUserPrice).attr("orgp",a.newUserPrice),a.appPrice>0&&e.hasClass("js-mobile-price")&&e.attr("data-orgp",a.appPrice).attr("orgp",a.appPrice)}),a.symbol?$(".js-price-mark-"+e).text(a.symbol):($(".js-price-mark-"+e).remove(),$(".js-price-mark-"+e).closest(".good-price-tag").hide())}),GLOBAL.currency.change_html(),a&&a(e.priceList))},initRender:function(e){e.priceList=e.priceList||e.discountPrice||[],this.render(e)},renderPrice:function(e){var a=PRICEPAGECOMMON.getPageSkus();0!==a.length&&g_getPriceBySkus(a).done(function(a){0===a.status&&PRICEPAGECOMMON.render(a,e)})}};window.GLOBAL={},GLOBAL.LANG=JS_LANG.substr(0,2),GLOBAL.slotMachineGame={},GLOBAL.utilFun={formatSearch:function(e){e=$.trim(e),e=e.replace(/\*/g,"~~"),e=e.replace(/\|/g,"]]"),e=e.replace(/\=/g,"(("),e=e.replace(/\"/g," "),e=e.replace(/\</g,"))"),e=e.replace(/\>/g,")))"),e=e.replace(/\?/g,"!!!"),e=e.replace(/\+/g,"__"),e=e.replace(/\-/g,"^^"),e=e.replace(/\//g,".."),e=e.replace(/\\/g,"..."),e=e.replace(/\%/g,"!!"),e=e.replace(/\#/g,"~~~"),e=e.replace(/\>/g,"___"),e=e.replace(/\</g,"^^^"),e=e.replace(/\"/g,"[["),e=e.replace(/\$/g,"[[["),e=e.replace(/\s+/g,"-"),e=e.toLowerCase();for(var a="À,Á,Â,Ã,Ä,Å,Ç,È,É,Ê,Ë,Ì,Í,Î,Ï,Ð,Ñ,Ò,Ó,Ô,Õ,Ö,Ø,Ù,Ú,Û,Ü,Ý,Þ,ß,à,á,â,ã,ä,å,ç,è,é,ê,ë,ì,í,î,ï,ð,ñ,ò,ó,ô,õ,ö,ø,ù,ú,û,ü,þ,ÿ,ā,ē,ě,ī,ń,ň,ō,Š,š,ū,Ÿ,ƒ,ǎ,ǐ,ǒ,ǔ,ǖ,ǘ,ǚ,ǜ,ǹ,ɑ",t="a,a,a,a,a,a,c,e,e,e,e,i,i,i,i,d,n,o,o,o,o,o,o,u,u,u,u,y,p,b,a,a,a,a,a,a,c,e,e,e,e,i,i,i,i,n,n,o,o,o,o,o,o,u,u,u,u,p,y,a,e,e,i,n,n,o,s,s,u,y,f,a,i,o,u,u,u,u,u,n,a",n=a.split(","),o=t.split(","),s=0;s<n.length;s++){var i=new RegExp(n[s],"g");e=e.replace(i,o[s])}return e=e.replace(/\b\w+\b/g,function(e){return e}),e=e.replace("%20","-")}},GLOBAL.cosplayPlaceholder=function(){var e=$(".js_placeholder");e.each(function(e,a){var t=$("#"+$(a).prop("for"));t.length&&!function(){var e=$(a);t.focus(function(a){e.hide()}),t.blur(function(a){$.trim($(this).val()).length<1&&e.show()})}(a),$.trim(t.val()).length<1?$(a).show():$(a).hide()})},GLOBAL.newsletter=function(e){var a=$(e),t=$.trim(a.val());return t.length<1?(layer.open({content:jsLg.formMsg.email_require_msg,btn:[jsLg.ok],yes:function(e){a.focus(),layer.close(e)}}),!1):GLOBAL.checkmail(t)?($.get("/"+GLOBAL.LANG+"/m-cemails.html",{txtEMail:t},function(e){e.status?layer.open({content:jsLg.subscribe_ok,btn:[jsLg.ok],yes:function(e){layer.close(e)}}):layer.open({content:e.msg,btn:[jsLg.ok],yes:function(e){layer.close(e)}})},"json"),!1):(layer.open({content:jsLg.formMsg.email_require_msg,btn:[jsLg.ok],yes:function(e){a.focus(),layer.close(e)}}),!1)},GLOBAL.checkmail=function(e){var a=/^[\w][\.\w_-]+[\w]@([a-zA-Z0-9_-])+(\.[a-zA-Z0-9_-])+/,t=a.test(e);return!!t},GLOBAL.Search={seach_submit:function(){var e,a,t=$("#js_topSeachInput"),n=$("#hidden-searchCategory");return e=$.trim(t.val()),e=e.replace(/\*/g,"~~"),e=e.replace(/\|/g,"]]"),e=e.replace(/\=/g,"(("),e=e.replace(/\"/g," "),e=e.replace(/\</g,"))"),e=e.replace(/\>/g,")))"),e=e.replace(/\?/g,"!!!"),e=e.replace(/\+/g,"__"),e=e.replace(/\-/g,"^^"),e=e.replace(/\//g,".."),e=e.replace(/\\/g,"..."),e=e.replace(/\%/g,"!!"),e=e.replace(/\#/g,"~~~"),e=e.replace(/\>/g,"___"),e=e.replace(/\</g,"^^^"),e=e.replace(/\"/g,"[["),e=e.replace(/\$/g,"[[["),e=e.replace(/\s+/g,"-"),e=e.toLowerCase(),e=e.replace(/\b\w+\b/g,function(e){return e}),e.length<1?t.focus():(e=e.replace("%20","-"),a=n.val(),window.location.href=DOMAIN+"/s/"+e+"/"),!1}},GLOBAL.setErrorMsg=function(e){var a=$("#js_errorMsg"),t=$("#pageHeader");a.length||(a=$('<div id="js_errorMsg" class="p15 errorMsg none"></div>'),$("body").append(a)),$(window).scrollTop()>=t.height()?a.css({top:0,position:"fixed",width:"100%","z-index":9999}):a.css({top:t.height(),position:"absolute",width:"100%","z-index":9999}),a.html(e).slideDown(),setTimeout(function(){a.slideUp().html("")},4e3)},GLOBAL.lazyLoad={scrollLazyLoad:function(e){var a=$(e);a.length&&a.lazyload({threshold:20,effect:"fadeIn",failure_limit:60,skip_invisible:!1,error:function(e,a){a=a.replace(".webp",""),e.attr("src",a)}})}},GLOBAL.login={info_check:function(e){var a=this,t="/fun/ajax/index.php?module=Common&act=infoCheck&lang="+GLOBAL.LANG,n=window.location.href,o=_GET("lkid",n);if($.cookie("isloginInfo",0,{expires:0,path:"/",domain:COOKIESDIAMON}),o){var s=encodeURIComponent(document.referrer);t+="&lkid="+o+"&referrer_url="+s}$.ajax({type:"GET",url:t,dataType:"jsonp",data:{location_url:location.href,jsonParam:a.infocheckParam()},cache:!1,success:function(t){$("body").trigger("custom-infocheck-success",t),PRICEPAGECOMMON.initRender(t),GLOBAL.g_info_check_msg=t,t.cartItems<=99?$("#js_topCartNum").text(t.cartItems):$("#js_topCartNum").text("99+"),$("#js_topCartNum").html(t.cartItems),t.status,e&&"function"==typeof e&&e(t),a.selectPageActive({data:t}),$("#head_user_nickname").text(t.headUserNickname),GLOBAL.slotMachineGame=t}})},indexActive:function(e){if(e.newGoodsCountForThatDay){(e.newGoodsCountForThatDay.total>0||"99+"==e.newGoodsCountForThatDay.total)&&($(".js-new-goods-tip span").html(e.newGoodsCountForThatDay.total),$(".js-new-goods-tip").show(),setTimeout(function(){$(".js-new-goods-tip").fadeOut()},3e3));var a=new Date(1e3*Number(e.newGoodsCountForThatDay.expire));document.cookie="newGoodsNumForSameDay="+e.newGoodsCountForThatDay.total+"; expires="+a+"; domain="+COOKIESDIAMON+"; path=/"}},indexPageParam:function(){var e=this,a=[],t=e.ajaxParam(),n=a.concat(t);return n},goodsPageParam:function(){return[{action:"getWarehouseTipsByIp",param:{goods_sn:$.trim($("#hidden-goodssn").val())}}]},commomPageParam:function(e){var a=e||[],t=PRICEPAGECOMMON.getPageSkus();return a.push({action:"isWomensDay"},{action:"bannerCountDown"}),t.length&&("goods"===CONTROLLER?a.push({action:"discountPrice",param:{sku:t.join(","),isShowDetail:1}}):a.push({action:"discountPrice",param:[t.join(",")]})),a},infocheckParam:function(e){var a=this,t=[];if(CONTROLLER)switch(CONTROLLER){case"index":t=a.indexPageParam();break;case"goods":t=a.goodsPageParam();break;default:t=[]}return t=a.commomPageParam(t),JSON.stringify(t)},selectPageActive:function(e){var a=this;if(CONTROLLER)switch(CONTROLLER){case"index":a.indexActive(e.data)}},ajaxParam:function(){var e=[],a=$.cookie("newGoodsNumForSameDay");return a||e.push({action:"newGoodsCountForThatDay"}),e}},GLOBAL.currency={change_houbi:function(e,a){var t=e||$.cookie("bizhong"),n=$.cookie("changeBizhong");t=n?t:"fr"==GLOBAL.LANG||"es"==GLOBAL.LANG||"de"==GLOBAL.LANG?"EUR":"USD",arguments.length>1?this.change_html(t,a):this.change_html(t)},getIcon:function(e){var a;return a=my_array_sign[e]?my_array_sign[e]:"$"},change_html:function(e,a){var t,n,o=this,s=arguments.length>1?$(a):$("body"),i=s.find(".bizhong"),r=s.find(".my_shop_price"),c=e||$.cookie("bizhong"),l=($.cookie("bizhong"),window.location.href.match(/(currency=)([a-zA-z]+)(&?)/)),d=$.cookie("presentLang");if(d!=GLOBAL.LANG){switch(GLOBAL.LANG){case"es":c="EUR";break;case"fr":c="EUR";break;case"de":c="EUR";break;default:c="USD"}$.cookie("presentLang",GLOBAL.LANG,{expires:7,path:"/",domain:COOKIESDIAMON})}$.cookie("bizhong",c,{expires:7,path:"/",domain:COOKIESDIAMON}),l&&($.cookie("bizhong",l[2].toUpperCase(),{expires:7,path:"/",domain:COOKIESDIAMON}),c=l[2].toUpperCase()),my_array[c]||(c="USD",$.cookie("bizhong",c,{expires:7,path:"/",domain:COOKIESDIAMON})),"MXN"===c?$(".js_currency-button").html("<label>$"+this.getIcon(c).replace("$","")+"</label>"):$(".js_currency-button").html("<label>"+this.getIcon(c)+"</label>"+c),$("#js_currencyMenu .mm-title").html("Currency(<label>"+this.getIcon(c)+"</label>"+c+")"),i.html(c),n=this.getIcon(c),r.each(function(e,a){t=$(this).attr("orgp")||$(this).attr("data-orgp"),o.processer($(a),t,c,n)})},processer:function(e,a,t,n){var o=parseFloat(my_array[t]),s=n;if("JPY"==t){var i=(o*a).toFixed(0),r=i.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,");e.html(r+s)}else if("RUB"==t||"AED"==t)e.html((o*a).toFixed(2)+s);else if("BRL"==t)e.html(s+(o*a).toFixed(1)+"0");else if("EUR"===t)e.html((o*a).toFixed(2).replace(".",",")+" "+s);else if("CLP"==t)e.html(s+(o*a).toFixed(3));else if("DKK"==t){var c=(o*a).toFixed(2);c>1e3?(c=c.replace(".",","),c=c.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1.")):c=c.replace(".",","),e.html(s+" "+c)}else if("NOK"==t||"SEK"==t)e.html(s+parseInt(o*a));else if("ILS"==t)e.html(s+parseInt((o*a).toFixed(2)));else if("IDR"==t){var i=Math.ceil(o*parseFloat(a));i.toString().length>3&&(i=addPermillageMark(i.toString())),e.html(s+i)}else{if("MXN"===t)return void e.html("$"+(o*a).toFixed(2)+" MXN");"HKD"==t||"CHF"==t||"NZD"==t?e.html(s+(parseFloat(my_array[t])*parseFloat(a)).toFixed(2)):e.html(s+(parseFloat(my_array[t])*parseFloat(a)).toFixed(2))}}},GLOBAL.addFavorite=function(e,a){layer.open({type:2,shadeClose:!1}),$.get("/m-flow-a-drop_to_collect.htm",{id:e.gid},function(t){layer.closeAll(),1==t.status?a&&"function"==typeof a&&a(t,e):2==t.status?window.location.href=HTTPS_LOGIN_DOMAIN+"/"+JS_LANG+"sign-up.html?ref="+location.href:layer.open({content:t.msg,btn:[jsLg.ok],yes:function(e){layer.close(e)}})},"json")},GLOBAL.setCountry={getStateData:function(e,a,t){var n=this;$.ajax({url:"/ajax/?cmd=userRegionList",type:"GET",dataType:"json",data:{type:"province",id:e.countryId}}).done(function(o){"success"==o.msg&&(n.setState(o.data,e,t),"function"==typeof a&&a(o))})},setState:function(e,a,t){var n=e,o=a.stateId?a.stateId:"",s="",i=$("#js_state_"+a.key);if(e.length){s+='<div class="selBox">',s+='<select id="states_'+a.key+"_"+a.key+'" name="province" class="form-control">',s+='<option value="">'+jsLg.formMsg.pleaseSelectCountry+"</option>";for(stateIrem in n)s+=n[stateIrem].id==o?'<option value="'+n[stateIrem].id+'" selected>'+n[stateIrem].name+"</option>":'<option value="'+n[stateIrem].id+'">'+n[stateIrem].name+"</option>";s+="</select>",s+="</div>"}else s+='<input type="text" name="province" class="form-control" value="',s+=t.defaultValue?t.defaultValue:"",s+='">';i.html(s)},getCityData:function(e,a){var t=this;$.ajax({url:"/ajax/?cmd=userRegionList",type:"GET",dataType:"json",data:{type:"city",province:e.provinceId,country_id:e.countryId}}).done(function(n){"success"==n.msg&&(t.setCityState(n.data,e),"function"==typeof a&&a())})},setCityState:function(e,a){var t=e,n=a.cityId?a.cityId:"",o="",s=$("#js_state_city");if(t.length){o+='<select class="form-control js_state" name="city">',o+='<option value="">'+jsLg.formMsg.pleaseSelectCity+"</option>";for(stateItem in t)o+=t[stateItem].id==n?'<option value="'+t[stateItem].name+'" selected>'+t[stateItem].name+"</option>":'<option value="'+t[stateItem].name+'">'+t[stateItem].name+"</option>";o+="</select>"}else o+='<input type="text" name="city" id="city" class="form-control" value="">';s.html(o)}},GLOBAL.cart={addcart:function(e,a){layer.open({type:2,shadeClose:!1}),$.ajax({url:"/ajax/?cmd=cartAddToBag",type:"GET",dataType:"jsonp",data:{goods_id:e.goods_id,number:e.number}}).done(function(e){layer.closeAll(),0==e.status?layer.open({content:e.msg,time:3,success:function(e){e.className=e.className+" layermbox-msg"}}):(e.data.total.cart_number<=99?$("#js_topCartNum").text(e.data.total.cart_number):$("#js_topCartNum").text("99+"),a&&"function"==typeof a&&a(e))})},addNum:function(e){var a=$(e),t=Number(a.val());a.val(t+1),a.keyup()},reduceNum:function(e){var a=$(e),t=Number(a.val());t>1&&(a.val(t-1),a.keyup())},changeNum:function(e,a){var t,n,o=$(e),s=parseInt(o.val()),i=$("#unit_price2"),r=$("#new_addcart"),c=$("#js_isVipPrice").val();if($.trim(o.val()).length){if(isNaN(s)||0==s)return void o.val(1);if(arguments.length>1&&1==a)return void r.data("num",s);if(c&&c-0>0)return void r.data("num",s);$("#addTocart_msgShow").remove(),s<9999&&($("input.js_orangNum").each(function(e,a){if(t=$(this).data("val").toString(),t=parseInt(t.replace(/[\u4e00-\u9fa5]/g,""),10),s>=t){var o=$("#pk"+$(this).data("atrp")).attr,r="";o("orgp")?r="orgp":o("data-orgp")&&(r="data-orgp"),n=o.attr(r),i.attr(r,n)}}),GLOBAL.currency.change_html("",i.parent()),r.data("num",s),o.val(s))}}},GLOBAL.loadPage=function(e){var a={position:"left"},t=$.extend(!0,{},a,e),n=$("#loadingPanel");n.length||(n=$('<div id="loadingPanel" ><div><div class="loading_mask"><dl><dd></dd><dd></dd><dd></dd><dd></dd><dd></dd></dl></div></div></div>'),$("body").append(n)),n.mmenu({offCanvas:{position:t.position,zposition:"front",extensions:["theme-white"]}}),n.data("mmenu").open()},GiveGift.prototype={init:function(){var e=this,a=window.location.search;switch(e.giveType){case"give1":a.indexOf("is_old=1")>-1?e.claim(e.curIndex):e.isShow();break;case"give2":a.indexOf("is_new=1")>-1?e.claim(e.curIndex):e.isShow();break;default:e.isShow()}},isShow:function(){var e=this;return $.ajax({url:e.urls[0],type:"GET",dataType:"json",data:{lang:JS_LANG.replace("/","")}}).done(function(a){1===a.status&&(e.target.show(),"give2-checkout"===e.giveType?(e.target.find(".give-code span").text(a.coupon),e.target.find(".give-tip span").text(a.expire_date)):e.target.show().find(".next").on("click",function(){e.claim(e.curIndex)}),e.close())}),!0},claim:function(){var e=this,a=$.ajax({url:e.urls[1],type:"GET",dataType:"json",data:{lang:JS_LANG.replace("/","")}}).done(function(a){switch(e.target.show(),(window.location.search.indexOf("is_old=1")>-1||window.location.search.indexOf("is_new=1")>-1)&&e.close(),clearTimeout(e.claimTime),a.status){case 1:"give2-checkout"===e.giveType&&(e.target.find(".give-code span").text(a.coupon),e.target.find(".give-tip span").text(a.expire_date)),e.target.find(".section-"+(e.curIndex+1)).show();var t=e.target.find(".section-"+e.curIndex);t.addClass("active"),e.curIndex++,setTimeout(function(){t.hide()},2e3);break;case-1:var n="";switch(e.giveType){case"give2":break;case"give1":n="is_old",window.location.href=HTTPS_USER_DOMAIN+"/"+JS_LANG+"sign-up.html?ref="+encodeURIComponent(window.location.href+(window.location.search.indexOf("?")>-1?"&":"?")+n+"=1");break;default:window.location.href=HTTPS_USER_DOMAIN+"/"+JS_LANG+"sign-up.html?ref="+encodeURIComponent(window.location.href+(window.location.search.indexOf("?")>-1?"&":"?")+n+"=1")}break;default:layer.open({content:2===a.status?jsLg.give_gift_received:jsLg.give_gift_error,btn:[jsLg.ok]}),e.target.find(".next").unbind(),e.target.remove()}});this.claimTime=setTimeout(function(){a.abort(),layer.open({content:jsLg.give_gift_error,btn:[jsLg.ok]})},1e4)},close:function(){var e=this;e.target.find(".give-close a").on("click",function(){e.target.remove()})}},$(function(){function e(e){var a="";e.newUserBanner.css&&($(".banner_fix").remove(),a=e.newUserBanner.css,$("#pageHeader").prepend(a)),setTimeout(function(){var e=$("#pageHeader");e.length&&$("#page").css("paddingTop",e.outerHeight())},1e3)}function a(e){var a=e.bannerCountDown;if(a&&1==a.isValid){var t="";window.tminusnow=JSON.stringify({now:a.nowTime});var n=new Date(a.endTime),o={day:n.getDate(),month:n.getMonth()+1,year:n.getFullYear(),hour:n.getHours(),min:n.getMinutes(),sec:n.getSeconds()};1==a.isStart?(t="320",$(".js_banner_4th_start").show(),$(".js_banner_4th_unstart").hide()):(t="520",$(".js_banner_4th_start").hide(),$(".js_banner_4th_unstart").show()),$("#"+t+"-dashboard").tminusCountDown({targetDate:o,style:"darth",launchtarget:"countdown",omitWeeks:"true",omitDays:"true",id:t,event_id:"",onComplete:function(){}})}}function t(e){function a(){var e,s,i,r,c,l=$(".js_4th_timer"),d=n-t;return d>=0?(e=Math.floor(d/1e3/60/60/24),s=Math.floor(d/1e3/60/60%24),i=Math.floor(d/1e3/60%60),r=Math.floor(d/1e3%60),c=Math.floor(d%1e3),e<10&&(e="0"+e),c<100&&(c="0"+c),r<10&&(r="0"+r),i<10&&(i="0"+i,c=c.toString().substr(0,1)),e>=0&&(s=parseInt(s)+parseInt(24*e)),s<10&&(s="0"+s),c=c.toString().substr(0,1),l.html('<span class="num">'+s+'</span> <span class="text">:</span> <span class="num">'+i+'</span> <span class="text">:</span> <span class="num">'+r+'</span> <span class="text">:</span> <span class="num">'+c+"</span>"),o=setTimeout(a,50),t+=50,void l.attr("data-count-down",d)):void clearTimeout(o)}var t=1e3*parseInt(e.now),n=1e3*parseInt($(".js_4th_timer").data("end-time")),o=null;a()}function n(){var e=$("#js_topSeachInput").val();if(""!=e){var a="/index.php?m=keyword_search&keyword="+e+"&callback=?";$.getJSON(a,"",function(e){"fail"!=e.res?($("#js_searchTips").html(e.res),o()):s()})}else s()}function o(){$("#js_topSeachInput").val();$("#js_clearSearch").show(),$("#js_resWrap").show(),$("#js_searchBox").css("overflowY","hidden");var e=$("#js_searchTips li").not(".searchTips_title"),a=e.size(),t=0;$(document).bind("keydown",function(n){if(38==n.keyCode)t--,t<0&&(t=a);else{if(40!=n.keyCode)return;t++,t>a&&(t=1)}var o=e.eq(t-1);o.siblings().find("a").removeClass("ahover"),o.find("a").addClass("ahover"),$("#js_topSeachInput").val(o.find("span").text())})}function s(){""==$.trim($("#js_topSeachInput").val())?$("#js_clearSearch").hide():$("#js_clearSearch").show(),$("#js_resWrap").hide(),$("#js_searchBox").css("overflowY","auto"),$(document).unbind("keydown")}function i(){var e=$("#pageHeader");if(e.length){e.addClass("header--fixed").parent().css("paddingTop",e.outerHeight());var a=new Headroom(document.querySelector("#pageHeader"),{tolerance:5,offset:205,classes:{initial:"animated",pinned:"slideInDown",unpinned:"slideOutUp"}});a.init()}}!function(e){e&&$.get("/fun/index.php?act=statisticsLkid",{lkid:e,location_url:location.href,referrer_url:document.referrer})}(_GET("lkid")),$(".js_email_suffix").autoAddEmailSuffix();var r=window.location.search.match(/click_id\=\w+/);r&&$.cookie("eNP_click_id",r[0].split("=")[1],{expires:60,domain:".zaful.com"}),$("#js_giveLayer")[0]&&new GiveGift($("#js_giveLayer"),["/fun/ajax.php?act=is_old_user","/fun/ajax.php?act=active_old_user"],"give1"),$("#js_give2Layer")[0]&&new GiveGift($("#js_give2Layer"),["/fun/ajax.php?act=is_new_user","/fun/ajax.php?act=active_new_user"],"give2"),$("#js_give3Layer")[0]&&new GiveGift($("#js_give3Layer"),["/fun/index.php?act=send_new_user_first_order_coupon","/fun/ajax.php?act=send_new_user_first_order_coupon"],"give2-checkout"),$(".js_loading").on("tap",function(){var e=$(this),a=e.attr("href");return layer.open({type:2,shadeClose:!1}),a.indexOf("javascript:")>=-1&&(window.location.href=a),!1}),GLOBAL.login.info_check(function(n){1==n.popup&&christmasPrize.ini(),e(n),a(n),$(".js_goods_page").length>0&&$(".js_4th_timer").length>0&&t(n)}),GLOBAL.currency.change_houbi(),GLOBAL.lazyLoad.scrollLazyLoad(".js_gdexp_lazy"),GLOBAL.lazyLoad.scrollLazyLoad(".js_imglazy"),GLOBAL.lazyLoad.scrollLazyLoad(".js_lazy"),GLOBAL.cosplayPlaceholder(),function(){var e;if($("#all_menu").length>0){new BScroll("#all_menu",{click:!0})}if($("#sub_nav").length>0)var e=new BScroll("#sub_nav",{click:!0});$("#all_menu").on("click",".js_wait",function(e){layer.open({type:2,shadeClose:!1})}),$("#js_navTopmenu").on("click",function(){var e=null===$("#page").css("paddingTop").match(/\d+/)?0:$("#page").css("paddingTop").match(/\d+/);$("#page").css({height:$(window).height()-e,overflowY:"hidden"});var a=$("#all_menu");$("#js_menuUl > .site-nav-level img[data-src]").each(function(){var e=$(this);e.attr("src",e.data("src"))}),a.addClass("site-nav-active")}),$(".js_showSubNav").on("click",function(){var a=$("#sub_nav");a.find(".content").html($(this).parent().next("section").html()),a.find("img[data-src]").each(function(){var e=$(this);e.attr("src",e.data("src"))}),e.refresh(),a.addClass("sub-nav-active")}),$("#sub_nav").on("click",".js_backToParentNav",function(e){e.stopPropagation(),$("#sub_nav").removeClass("sub-nav-active")}).on("click",".js_showThirdNav",function(){var e=$(this),a=e.parent();if("true"==e.attr("data-active"))a.css("borderBottom","0"),a.next("ul").hide(),e.attr("data-active","false");else{var t=e.closest("ul");t.find("div").css("borderBottom",0),t.find(".site-nav-last").hide(),t.find(".js_showThirdNav").attr("data-active","false"),a.css("borderBottom","1px solid #dddddd"),a.next("ul").show(),e.attr("data-active","true")}}),$("body").on("click",".js_closeSiteNav",function(e){e.stopPropagation(),$("#page").css({height:"auto",overflowY:"auto"}),$(".site-nav-last").hide(),$("#all_menu").removeClass("site-nav-active"),$("#sub_nav").addClass("sub-nav-quit"),setTimeout(function(){$("#sub_nav").removeClass("sub-nav-quit sub-nav-active")},300)}),$("body").on("click","#js_currencyMenu li",function(){var e=$(this),a=e.data("bizhong");$.cookie("changeBizhong",1,{expires:365,path:"/",domain:COOKIESDIAMON}),GLOBAL.currency.change_houbi(a),$(".js_closeSiteNav").trigger("click")})}(),$("#js_gotoTop").on("touchend",function(e){var a=$(this);$("html,body").animate({scrollTop:0},300,function(){a.hide()}),e.preventDefault()}),$(window).on("scroll",function(){var e=$(window).scrollTop();e>700?$("#js_gotoTop").show():e<700&&$("#js_gotoTop").hide()}),$("#js_clearSearch").tap(function(){$("#js_topSeachInput").val(""),$("#js_topSeachInput").focus()}),$("#js_topSeachInput").keyup(function(e){37!=e.keyCode&&38!=e.keyCode&&39!=e.keyCode&&40!=e.keyCode&&n()}),$("#js_topSeachInput").keydown(function(e){38!=e.keyCode&&40!=e.keyCode||e.preventDefault()}),$("#js_searchTips").on("click","a",function(){return $("#js_topSeachInput").val($(this).text()),GLOBAL.Search.seach_submit(),s(),!1}),$(document).on("click",function(e){for(var e=e||window.event,a=e.target||e.srcElement;a;){if(a.id&&("js_searchTips"==a.id||"js_topSeachInput"==a.id))return;a=a.parentNode}$(".nav_search").removeClass("focus"),s()}),$("#t_searchform").submit(function(){return GLOBAL.Search.seach_submit(),!1}),$("#js_showSearch").tap(function(){var e=($(this),null===$("#page").css("paddingTop").match(/\d+/)?0:$("#page").css("paddingTop").match(/\d+/));$("#js_searchBox img[data-src]").each(function(){var e=$(this);e.attr("src",e.data("src")),gbLogsss.getsku(e),gbLogsss.sendsku()}),$("#page").css({height:$(window).height()-e,overflowY:"hidden"}),$("#js_searchBox").slideDown(300),setTimeout(function(){$("#js_searchBox").find(".search-popup-top").addClass("search-popup-top-fixed")},300),"undefined"==typeof window.Swiper?$LAB.script("swiper.min.js").wait(function(){new Swiper("#search_popup_recommend_list",{slidesPerView:4,preventLinksPropagation:!0})}):new Swiper("#search_popup_recommend_list",{slidesPerView:4,preventLinksPropagation:!0})}),$("body").on("click","#js_closeSearchPopup",function(){$("#page").css({height:"auto",overflowY:"auto"}),$("#js_searchBox").scrollTop(0),$("#js_searchBox").find(".search-popup-top").removeClass("search-popup-top-fixed"),$("#js_searchBox").slideUp(200)}),$("#js_startSearch").tap(function(){GLOBAL.Search.seach_submit()}),$("#js_subscribe").tap(function(){$("#txtEMail");return GLOBAL.newsletter($("#txtEMail"))}),$("#js_ui-mark").on("click",function(e){e.stopPropagation();var a=$(this).find(".ui-dropmenu");a.hasClass("ui-in")?a.removeClass("ui-in"):a.addClass("ui-in"),$("body").one("click",function(e){var a=$("#js_ui-mark").find(".ui-dropmenu");a.hasClass("ui-in")&&setTimeout(function(){a.removeClass("ui-in")},300)})}),$(".js_gotoBackIcon").on("tap",function(){GLOBAL.loadPage(),setTimeout(function(){window.history.go(-1)},1e3)}),$("#gotoFullSite").click(function(){return window.location.href=$(this).attr("href"),$.cookie("gotoWebsite","0",{expires:7,path:"/",domain:COOKIESDIAMON}),!1}),i(),$(".orderList").on("click",".pop_tips",function(){$(this).parents(".weaken").find(".text_tips").stop(!0,!0).slideToggle()});var c=$(window).width();$(window).resize(function(){var e=$(window).width();c!==e&&(setTimeout(function(){var e=$("#pageHeader");e.length&&$("#page").css("paddingTop",e.outerHeight())},2e3),c=e)}),$(".js_subscribe").focus(function(){$(".js_tip_sub").show()}).blur(function(){setTimeout(function(){$(".js_tip_sub").hide()},100)})}),function(){var e=navigator.userAgent.toLocaleLowerCase(),a="android"==e.match(/android/i),t="iphone os"==e.match(/iphone os/i),n="ipad"==e.match(/ipad/i);e.match(/version\/([\d.]+).*safari/);window.AndroidDown={closePop:function(){$("#js-appDownload").remove(),$("#footer").css("padding-bottom","0"),$.cookie("isAppDown",1,{expires:7,path:"/",domain:COOKIESDIAMON})},redirect:function(){window.location.href=this.setInfo().link},setDownHtml:function(){return['<div class="app-download" id="js-appDownload">','<span class="close" onclick="AndroidDown.closePop();"></span>','<dl class="content clearfix">','<dt class="img"><img src="'+appDownloadConfig.logo+'"></dt>','<dd class="title">'+appDownloadConfig.title+"</dd>",'<dd class="stars"><img src="'+appDownloadConfig.stars+'"></dd>','<dd class="desc">'+this.setInfo().desc+"</dd>","</dl>",'<a href="'+this.setInfo().link+'" class="view">'+appDownloadConfig.view+"</a></span>","</div>"].join("")},setInfo:function(){var e,o,s=$.cookie("linkid");return a&&(e=s?appDownloadConfig.androidLkidUrl+s:appDownloadConfig.androidUrl,o=appDownloadConfig.desc_andriod),(t||n)&&(e=s?appDownloadConfig.iosLkidUrl+s:appDownloadConfig.iosUrl,o=appDownloadConfig.desc_ios),{link:e,desc:o}},showTips:function(){var e=this.setDownHtml();$("body").append(e),$("#footer").css("padding-bottom","50px")},ini:function(){var e=this,o=($("#js-appDownload"),app_download_obj);if(1!=$.cookie("isAppDown")&&o.module&&o.download.length)for(var s in o.download){var i=o.download[s].device,r=o.download[s][o.module];a&&"Android"==i&&1==r&&e.showTips(),(t||n)&&"IOS"==i&&1==r&&e.showTips()}}},AndroidDown.ini(),$("#js-download-app-url").attr("href",AndroidDown.setInfo().link)}(),window.orderRecieveFn={orderData:{},layerIndex:null,showDialog:function(e){layerIndex=layer.open({type:1,content:'<div class="receive-order"><p class="title">'+jsLg.orderRecieveMsg.title+'?</p><p class="intro">'+jsLg.orderRecieveMsg.intro+'</p><p class="date">'+jsLg.orderRecieveMsg.date+':</p><input type="text" class="data-input" id="js_datePicker" readonly="readonly" data-url="/m-users-a-order_complete.htm"><p><button class="btn" id="js_dateSubmit">'+jsLg.submit+'</button></p><p class="last">'+jsLg.orderRecieveMsg.wantMorePoints+'</p><a href="javascript:;" class="close">×</a></div>',anim:"up",style:"background-color:transparent"}),e&&"function"==typeof e&&e()},showPointsPop:function(e,a){layer.open({type:1,content:'<div class="points-pop"><p class="notice">'+jsLg.orderRecieveMsg.zPointsNotice+'</p><p class="dashboard clearfix"><a href="/">'+jsLg.shopNow+'</a><a href="/m-users-a-points_record.htm">'+jsLg.zPoints+'</a></p><a href="javascript:;" class="close">×</a></div>',anim:"up",style:"background-color:transparent"}),$(".points-pop").on("click",".close",function(){layer.closeAll()})},createDatePicker:function(e){var a=this;e.datepicker({dateFormat:"mm/dd/yyyy",language:"en",autoClose:!0,minDate:new Date(a.orderData.minDate),maxDate:new Date(a.orderData.maxDate)})},submitDate:function(e){var a=this,t=e.val(),n=e.data("url");if(t&&!$.isEmptyObject(a.orderData)){var o=GLOBAL.LANG?GLOBAL.LANG+"/":"";$.ajax({url:"/"+o+"m-confirm_receipt.html",type:"post",data:{order_id:a.orderData.orderId}}).done(function(e){$.ajax({url:n,type:"post",data:{order_id:a.orderData.orderId,order_sn:a.orderData.orderSn,recieved_date:t},dataType:"json"}).done(function(e){1==e.status&&(layer.close(layerIndex),a.showPointsPop())})})}else e.focus()},bindEvent:function(){var e=this;$(".js_orderReceive").on("click",function(){var a=$(this);e.orderData.minDate=a.data("min_date"),e.orderData.maxDate=a.data("max_date"),e.orderData.orderId=a.data("order_id"),e.orderData.orderSn=a.data("order_sn"),e.showDialog(function(){e.createDatePicker($("#js_datePicker"))}),$(".receive-order,.points-pop").on("click",".close",function(){layer.closeAll()}),$("#js_dateSubmit").on("click",function(){e.submitDate($("#js_datePicker"))})})}},!function(){function e(e,a){for(var t=e,n=a||{},o=t.find("input"),s=0,i=o.length;s<i;s++){var r=$(o[s]),c=r.prop("type");if(/hidden|text/g.test(c)){var l=r.prop("name")||s;n[l]=r.val()}}return n}function a(a,t,n){return $.ajax({url:t.attr("action"),type:"POST",data:e(t,n),success:function(){g_func_showsubscribeSuccDialog()}}),a.preventDefault(),!1}window.g_func_showsubscribeSuccDialog=function(){var e='<div class="layer-subscribe-mask"></div><div class="layer-subscribe-successed"><div class="layer-customize-content"><div class="layer-subscribe-title">'+jsLg.thankyou_for_subscribe+'</div><div class="layer-subscribe-coupon"><p class="layer-subscribe-text">'+jsLg.you_get+'</p><p class="layer-subscribe-code">'+jsLg.subscribe_coupon+'</p></div><p class="layer-subscribe-next">'+jsLg.now_you_can+'</p><p><a href="'+DOMAIN_USER+"/"+JS_LANG+'sign-up.html?type=reg" class="layer-subscribe-register">'+jsLg.register_use_coupon+"</a></p></div></div>";return $(".layer-subscribe-successed").length?($(".layer-subscribe-successed").show(),void $(".layer-subscribe-mask").show()):($(e).appendTo("body"),
void $("body").on("click",".layer-subscribe-mask",function(){$(".layer-subscribe-successed, .layer-subscribe-mask").hide()}))},$(function(){$("#js_subscriptEmail").on("submit",function(e){var e=e||window.event;return/[0-9a-zA-Z]+@\w+\.\w+/.test($(this).find("#txtEMail").val())?void a(e,$(this),{textDingyueType:$("#textDingyueType").val()}):(layer.open({content:jsLg.formMsg.email_require_msg,btn:[jsLg.ok]}),e.preventDefault(),!1)})})}(),window.g_getPriceBySkus=function(e){if($.isArray(e))return $.ajax({url:"/fun/index.php?act=discountPrice",type:"get",dataType:"json",data:{skus:e.join(",")},cache:!1})};